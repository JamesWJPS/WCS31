<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Drag Test</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
        }
        .item {
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 8px 0;
            background: white;
            cursor: move;
            transition: all 0.2s ease;
        }
        .item:hover {
            border-color: #0d6efd;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .item.dragging {
            opacity: 0.5;
            transform: rotate(2deg);
        }
        .drop-zone {
            height: 40px;
            border: 3px dashed #0d6efd;
            border-radius: 8px;
            background: rgba(13, 110, 253, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 8px 0;
            color: #0d6efd;
            font-weight: bold;
        }
        .drop-zone:hover {
            background: rgba(13, 110, 253, 0.2);
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .drag-handle {
            cursor: grab;
            padding: 4px 8px;
            background: #f8f9fa;
            border-radius: 4px;
            margin-right: 10px;
            display: inline-block;
        }
        .drag-handle:hover {
            background: #e9ecef;
        }
        .drag-handle:active {
            cursor: grabbing;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function DragTest() {
            const [draggedItem, setDraggedItem] = useState(null);
            const [log, setLog] = useState(['ðŸš€ React Drag Test initialized']);

            const addLog = (message) => {
                const time = new Date().toLocaleTimeString();
                setLog(prev => [...prev, `${time}: ${message}`]);
            };

            const items = [
                { id: 'item1', title: 'Item 1' },
                { id: 'item2', title: 'Item 2' },
                { id: 'item3', title: 'Item 3' }
            ];

            const handleDragStart = (e, item) => {
                console.log('ðŸŽ¯ DRAGSTART:', item.title);
                addLog(`ðŸŽ¯ DRAGSTART: ${item.title}`);
                setDraggedItem(item);
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', item.id);
            };

            const handleDragEnd = (e, item) => {
                console.log('âœ… DRAGEND:', item.title);
                addLog(`âœ… DRAGEND: ${item.title}`);
                setDraggedItem(null);
            };

            const handleDragOver = (e) => {
                e.preventDefault();
                console.log('ðŸ‘† DRAGOVER');
            };

            const handleDrop = (e, targetItem) => {
                e.preventDefault();
                if (draggedItem && targetItem) {
                    console.log('ðŸ“¦ DROP:', draggedItem.title, 'â†’', targetItem.title);
                    addLog(`ðŸ“¦ DROP: ${draggedItem.title} â†’ ${targetItem.title}`);
                }
            };

            return (
                <div className="container">
                    <h2>ðŸ§ª React Drag & Drop Test</h2>
                    <p>Testing HTML5 drag and drop in React environment:</p>
                    
                    {items.map(item => (
                        <div key={item.id}>
                            {draggedItem && draggedItem.id !== item.id && (
                                <div 
                                    className="drop-zone"
                                    onDragOver={handleDragOver}
                                    onDrop={(e) => handleDrop(e, item)}
                                >
                                    Drop before {item.title}
                                </div>
                            )}
                            
                            <div 
                                className={`item ${draggedItem?.id === item.id ? 'dragging' : ''}`}
                                onDragOver={handleDragOver}
                                onDrop={(e) => handleDrop(e, item)}
                            >
                                <span 
                                    className="drag-handle"
                                    draggable={true}
                                    onDragStart={(e) => handleDragStart(e, item)}
                                    onDragEnd={(e) => handleDragEnd(e, item)}
                                >
                                    â‹®â‹®
                                </span>
                                <strong>{item.title}</strong> - Drag by the handle
                            </div>
                        </div>
                    ))}
                    
                    <div className="log">
                        <strong>Event Log:</strong><br />
                        {log.map((entry, index) => (
                            <div key={index}>{entry}</div>
                        ))}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<DragTest />, document.getElementById('root'));
    </script>
</body>
</html>